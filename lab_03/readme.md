# Отчет по Лабораторной работе №3 "Обработка разреженный матриц"

Вариант: 3

Студент: **Недолужко Денис**

Группа: **ИУ7-33Б**

Год: 2020

## Описание условия задачи

Цель работы: реализация алгоритмов обработки разреженных матриц,
сравнение эффективности использования этих алгоритмов со
стандартными алгоритмами обработки матриц при различном размере
матриц и степени их разреженности

## Описание ТЗ

### Описание задачи

Разреженная (содержащая много нулей) матрица хранится в форме 3-х объектов:

1. вектор `values`, содержищий значения ненулевых элементов;
1. вектор `columns`, содержищий номера столбцов для элементов вектора `values`;
1. связный список `pointers`, в элементе `i` которого находится номер компонент
в `values` и `columns`, с которых начинается описание строки `i` матрицы `A`.

Требуется:

1. Смоделировать операцию умножения матрицы и вектора-столбца,
хранящихся в этой форме, с получением результата в той же форме
1. Произвести операцию умножения, применяя стандартный алгоритм работы с
матрицами.
1. Сравнить время выполнения операций и объем памяти при использовании
этих 2-х алгоритмов при различном проценте заполнения матриц.

### Входные данные

1. Матрица генерируется автоматические по заданным количеству строк, количеству
столбцом и процент покрытия.
2. Матрица вводится вручную в формате MatrixMarket

### Выходные данные

Матрица печается если каждая из ее осей небольше 10. Всегда выводятся количество
тактов, размер матрицы в обычном и разреженном виде

### Способ обращения к программе

Запускается в терминале командой `./app.exe` в папке с программой.

### Описание возможных аварийных ситуаций

Некорректный ввод пользователя. Сообщение `Некорректный ввод`.

## Описание алгоритма

Разреженная двумерная матрица `matrix`; разреженная матрица-столбец `column`;
 разреженная матрица-произведение `product`

1. Выделяется память под матрицу-произведение `product`, длиной векторов
`values`, `columns` как число строк у матрицы `matrix`, длиной вектора
`pointers` как число строк у матрицы `matrix` + 1.
2. Вычисляется произведение для элемента iй строки. В цикле проходим по строке
матрицы `matrix` и складываем произведения этим элементов с соответствующими
элементами матрицы столбца `column` (0, если элемент отсутствует).
3. Вычисленное значение, если оно не 0 записывается в вектор `values`, в вектор
`columns` записывается 0, в вектор `pointhers` записывается соответствующее
значение для строки.
4. После провдеения всех произведение неиспользуемые элементы векторов `values`
и `columns` удаляются.

## Таблицы с результатами измерений

|      | i|rows|cols|mcover|ccover|     ticks|matrix [B]|column [B]|product [B]|
|------|--|----|----|------|------|----------|----------|----------|-----------|
| dense| 0| 100| 100|  0.0%|  0.0%|   1135081|     40832|      1232|      1232 |
|sparse| 0| 100| 100|  0.0%|  0.0%|     16178|       928|       928|       928 |
| dense| 1| 100| 100| 10.0%| 10.0%|    427103|     40832|      1232|      1232 |
|sparse| 1| 100| 100| 10.0%| 10.0%|     84863|     12928|      1048|      1792 |
| dense| 2| 100| 100| 40.0%| 40.0%|    423762|     40832|      1232|      1232 |
|sparse| 2| 100| 100| 40.0%| 40.0%|    356118|     48928|      1408|      2128 |
| dense| 3| 100| 100| 50.0%| 50.0%|    391652|     40832|      1232|      1232 |
|sparse| 3| 100| 100| 50.0%| 50.0%|    422116|     60928|      1528|      2128 |
| dense| 4| 100| 100|100.0%|100.0%|    320625|     40832|      1232|      1232 |
|sparse| 4| 100| 100|100.0%|100.0%|    604160|    120928|      2128|      2128 |
| dense| 5| 500| 500|  0.0%|  0.0%|   8504457|   1004032|      6032|      6032 |
|sparse| 5| 500| 500|  0.0%|  0.0%|     31991|      4128|      4128|      4128 |
| dense| 6| 500| 500| 10.0%| 10.0%|   8209331|   1004032|      6032|      6032 |
|sparse| 6| 500| 500| 10.0%| 10.0%|   1284373|    304128|      4728|     10116 |
| dense| 7| 500| 500| 40.0%| 40.0%|   7397428|   1004032|      6032|      6032 |
|sparse| 7| 500| 500| 40.0%| 40.0%|   6324036|   1204128|      6528|     10128 |
| dense| 8| 500| 500| 50.0%| 50.0%|   7416416|   1004032|      6032|      6032 |
|sparse| 8| 500| 500| 50.0%| 50.0%|   7928244|   1504128|      7128|     10128 |
| dense| 9| 500| 500|100.0%|100.0%|   7391752|   1004032|      6032|      6032 |
|sparse| 9| 500| 500|100.0%|100.0%|  14158847|   3004128|     10128|     10128 |
| dense|10|1000|1000|  0.0%|  0.0%|  29995723|   4008032|     12032|     12032 |
|sparse|10|1000|1000|  0.0%|  0.0%|     37784|      8128|      8128|      8128 |
| dense|11|1000|1000| 10.0%| 10.0%|  29621494|   4008032|     12032|     12032 |
|sparse|11|1000|1000| 10.0%| 10.0%|   5015560|   1208128|      9328|     20128 |
| dense|12|1000|1000| 40.0%| 40.0%|  29623956|   4008032|     12032|     12032 |
|sparse|12|1000|1000| 40.0%| 40.0%|  24450101|   4808128|     12928|     20128 |
| dense|13|1000|1000| 50.0%| 50.0%|  29655797|   4008032|     12032|     12032 |
|sparse|13|1000|1000| 50.0%| 50.0%|  33001614|   6008128|     14128|     20128 |
| dense|14|1000|1000|100.0%|100.0%|  29628981|   4008032|     12032|     12032 |
|sparse|14|1000|1000|100.0%|100.0%|  57160778|  12008128|     20128|     20128 |

## Вывод

При использовани разреженной матрицы до 40% покрытия ненулевыми элементами
алгоритм выигрывает как по времени, как и по используемой памяти. При
покрытии 50% и выше, алгоритм разреженной матрицы начинается проигрывать как по
памяти, как и по времени выполнения.

## Вопросы

1. Что такое разреженная матрица, какие схемы хранений таких матрицы вы знаете?\
Разреженная матрица - это матрица содержащая большое количество кулей. Методы
хранения элементов матрицы в списке: линейный связный список, кольцевой связный
список, двунаправленный стеки и очереди, связная схема хранения мутриц Кнута,
разреженный строчный формат (использовался в данной лабораторной работе).
2. Каким образом и сколько памяти выделяется под хранение разреженной и обычной
матрицы?\
Для хранения матрицы `NxM` элементов в обычном виде необходимо `N*M` ячеек.
Для хранения разреженной матрицы методом разреженного строчного формата,
необходимо `2 * K + (N + 1)`, где `K`- количество ненулевых элементов матрицы.
3. Какой принцип обработки разреженной матрицы?\
Алгоритм обработки разреженной матрицы предуматривает работу только с ненулевыми
элементами матрицы, поэтому количество действий прапорционально количеству
ненулевый элементов.
4. В каком случае для матриц эффективнее применять стандартные алгоритмы
обработки матриц? От чего это зависит?\
Если количество ненулевых элементов матрицы не превышает 40% от общего числа
элементов, то эффективнее применять алгоритмы работы с разреженной матрицей, так
как он выигрывает по памяти и по времени. Иначе - стандартный алгоритмы
обработки матриц.